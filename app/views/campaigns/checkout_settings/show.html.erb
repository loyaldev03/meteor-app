<%- model_class = @campaign.class -%>

<div class='row-fluid'>
  <div class='span12'>
    <h2><%= @campaign.name %></h2>
    <h4><%= t('campaign.checkout_settings') %></h4>
    <hr />
  </div>
</div>

<div class='row-fluid'>
  <h4><%= I18n.t('activerecord.attributes.checkout_settings.common_settings') %></h4>
  <table class="table table-striped table-bordered checkout-settings">
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:header_image) %></p>
      </td>
      <td>
        <% if @campaign.header_image.present? %>
          <%= image_tag @campaign.header_image.url(:thumb) %>
          <% if @current_agent.can? :manage, Campaign, @campaign.club.id %>
            <br />
            <%= link_to I18n.t(:clear), 
              campaign_checkout_settings_remove_image_path(@current_partner.prefix, @current_club.name, @campaign.id, image_name: 'header_image'), 
              method: :delete, 
              id: 'btn-remove-header-image',
              class: 'btn btn-mini btn-danger',
              data: {confirm: I18n.t('activerecord.attributes.checkout_settings.clear_image_prompt') } %>
          <% end %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:css_style) %></p>
      </td>
      <td>
        <% if @campaign.css_style.present? %>
          <%= text_area_tag('css_style',  @campaign.css_style, :cols => 60, :rows =>5, class: 'text_area input-xxlarge', readonly: true) %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
  </table>

  <h4><%= I18n.t('activerecord.attributes.checkout_settings.checkout_page') %></h4>
  <table class="table table-striped table-bordered checkout-settings">
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:checkout_page_bonus_gift_box_content) %></p>
      </td>
      <td>
        <% if @campaign.checkout_page_bonus_gift_box_content.present? %>
          <%= text_area_tag('checkout_page_bonus_gift_box_content',  @campaign.checkout_page_bonus_gift_box_content, :cols => 60, :rows =>5, class: 'text_area input-xxlarge', readonly: true) %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:checkout_page_footer) %></p>
      </td>
      <td>
        <% if @campaign.checkout_page_footer.present? %>
          <%= text_area_tag('checkout_page_footer',  @campaign.checkout_page_footer, :cols => 60, :rows =>5, class: 'text_area input-xxlarge', readonly: true) %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
  </table>

  <h4><%= I18n.t('activerecord.attributes.checkout_settings.result_pages') %></h4>
    <table class="table table-striped table-bordered checkout-settings">
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:thank_you_page_content) %></p>
      </td>
      <td>
        <% if @campaign.thank_you_page_content.present? %>
          <%= text_area_tag('thank_you_page_content',  @campaign.thank_you_page_content, :cols => 60, :rows =>5, class: 'text_area input-xxlarge', readonly: true) %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:duplicated_page_content) %></p>
      </td>
      <td>
        <% if @campaign.duplicated_page_content.present? %>
          <%= text_area_tag('duplicated_page_content',  @campaign.duplicated_page_content, :cols => 60, :rows =>5, class: 'text_area input-xxlarge', readonly: true) %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:error_page_content) %></p>
      </td>
      <td>
        <% if @campaign.error_page_content.present? %>
          <%= text_area_tag('error_page_content',  @campaign.error_page_content, :cols => 60, :rows =>5, class: 'text_area input-xxlarge', readonly: true) %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:result_page_footer) %></p>
      </td>
      <td>
        <% if @campaign.result_page_footer.present? %>
          <%= text_area_tag('result_page_footer',  @campaign.result_page_footer, :cols => 60, :rows =>5, class: 'text_area input-xxlarge', readonly: true) %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
    <tr>
      <td>
        <p class="text-right"><%= model_class.human_attribute_name(:result_pages_image) %></p>
      </td>
      <td>
        <% if @campaign.result_pages_image.present? %>
          <%= image_tag @campaign.result_pages_image.url(:thumb) %>
          <% if @current_agent.can? :manage, Campaign, @campaign.club.id %>
            <br />
            <%= link_to I18n.t(:clear), 
              campaign_checkout_settings_remove_image_path(@current_partner.prefix, @current_club.name, @campaign.id, image_name: 'result_pages_image'), 
              method: :delete, 
              id: 'btn-remove-result-pages-image',
              class: 'btn btn-mini btn-danger',
              data: {confirm: I18n.t('activerecord.attributes.checkout_settings.clear_image_prompt') } %>
          <% end %>
        <% else %>
          <span class='label label-default'>Not set</span>
        <% end %>
      </td>
    </tr>
  </table>
</div>

<div class='row-fluid'>
  <div class='span12'>
    <div class="form-actions">
      <%= link_to t('activerecord.attributes.checkout_settings.edit_settings'), campaign_checkout_settings_edit_path(@current_partner.prefix, @current_club.name, @campaign.id), class: 'btn btn-primary' %>
      <%= link_to t('activerecord.attributes.checkout_settings.clear_all_settings'),
        campaign_checkout_settings_destroy_path(@current_partner.prefix, @current_club.name, @campaign.id), 
        method: :delete, 
        data: {confirm: I18n.t('activerecord.attributes.checkout_settings.clear_all_settings_prompt') }, 
        id: 'clear-all-settings', 
        class: 'btn btn-danger' if @current_agent.can? :manage, Campaign, @campaign.club.id %>
      <%= link_to t('back', default: t('helpers.links.back')), campaigns_path, class: 'btn' %>
    </div>
  </div>
</div>

<% content_for :javascript do %>
  checkoutSettingsShowFunctions();
<% end %>
