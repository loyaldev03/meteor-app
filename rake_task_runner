#!/bin/sh

# needs to find ruby and rake binaries
export PATH=$PATH:/usr/local/bin

# 15 0 * * * rake_task_runner
logfile="/tmp/cron_rake.log"

echo "PATH variable => `printenv PATH`"
`cd /var/www/backend-sac-platform/current && RAILS_ENV=staging rake members:cancel >> $logfile 2>&1`
# billing should be executed after cancel jobs finishes
`cd /var/www/backend-sac-platform/current && RAILS_ENV=staging rake billing:send_prebill >> $logfile 2>&1`
`cd /var/www/backend-sac-platform/current && RAILS_ENV=staging rake members:process_fulfillments >> $logfile 2>&1`
`cd /var/www/backend-sac-platform/current && RAILS_ENV=staging rake billing:for_today >> $logfile 2>&1`
`cd /var/www/backend-sac-platform/current && RAILS_ENV=staging rake members:send_pillar_emails >> $logfile 2>&1`
`cd /var/www/backend-sac-platform/current && RAILS_ENV=staging rake members:send_happy_birthday >> $logfile 2>&1`

